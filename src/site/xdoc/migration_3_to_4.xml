<?xml version="1.0"?>
<!--
Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements.  See the NOTICE file distributed with
this work for additional information regarding copyright ownership.
The ASF licenses this file to You under the Apache License, Version 2.0
(the "License"); you may not use this file except in compliance with
the License.  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<document>
 <properties>
  <title>What's new in Commons Collections 4.0?</title>
  <author email="dev@commons.apache.org">Commons Documentation Team</author>
 </properties>
<body>

<section name="What's new in Commons Collections 4.0?">
<p>Commons Collections 4.0 is out, and the obvious question is: <i>"So what? What's changed?"</i>.</p>
<section name="The big story">
<p>Collections is now Java 5 based. We've generified the API, moved certain APIs to support <code>varargs</code> and thrown out any features 
that are now supported by Java itself. We've removed the deprecated parts of the API and have also removed some features that 
were deemed weak or unnecessary. All of this means that Collections 4.0 is not backwards compatible. </p>
<p>To that end we have changed the package name, allowing Collections 4.0 to sit side-by-side with your previous version of Collections without any bad side effects.
The new package name is the exciting and original <code>org.apache.commons.collections4</code>. This also forces you to recompile your code, making sure the compiler
can let you know if a backwards incompatibility affects you.</p>
<p>As you'd expect, there are also new features, enhancements and bugs fixed.</p>
</section>
<section name="Migrating from 3.x">
<h3>Java code</h3>
<p>Despite the label of backwards incompatibility, in the vast majority of cases the simple addition of a <code>'4'</code> to an import statement
will suffice for your migration.</p><br/>
<p>Change: <code>import org.apache.commons.collections</code> -&gt; <code>import org.apache.commons.collections4</code></p>
<h3>Maven</h3>
<p><code>groupId</code>: <code>commons-collections</code> -&gt; <code>org.apache.commons</code></p>
<p><code>artifactId</code>: <code>commons-collections</code> -&gt; <code>commons-collections4</code></p>
</section>

<section name="What's gone?">
<h3>Buffer package</h3>
<p>Java 5 introduced a Queue interface which is very similar to a Buffer but offers additional methods, therefore we decided
to replace our existing Buffer implementations with this new interface (unless equivalent classes already exist in the JDK).</p>
<h3>Previous Deprecations</h3>
<p>All deprecated fields/methods/classes - with a new major version, all of the previously deprecated parts of the API could finally go away. </p>
<p>If you feel that something was unfairly taken away, please feel free to contact the list. In many cases the possibility exists to reintroduce code. </p>
</section>
<section name="Deprecations">
<p>The lone deprecation in 4.0 is for the class "ArrayStack". Java 6 introduced the "java.util.Deque" interface, which supports
LIFO queue implementations, making this class obsolete.</p>
</section>
<section name="New packages">
<p>Several new packages have shown up.
<ul>
  <li>org.apache.commons.collections3.queue</li> - collections and decorators for the "java.util.Queue" interface
  <li>org.apache.commons.collections3.sequence</li> - provides an implementation to compare two sequences (lists) based on Myers diff algorithm
  <li>org.apache.commons.collections3.splitmap</li> - supports Map implementations of Get and Put interfaces with differing generic types  
  <li>org.apache.commons.collections3.trie</li> - TODO  
</ul>
</p>
</section>
<section name="New classes + methods">
<p>There are many new classes and methods in Collections 4.0 - the most complete way to see the changes is via this
<a href="lang2-lang3-clirr-report.html">Collections3 to Collections4 Clirr report</a>. </p>
<p>Here is a summary of the new classes: </p>
<ul>
<li><code>TBD</code></li>
</ul>
</section>

<section name="Bugfixes?">
<p>See the <a href="changes-report.html#4.0">4.0 changes report</a> for the list of fixed bugs and other enhancements. </p>
</section>

<section name="Other Notable Changes">
<ul>
<li>TBD</li>
</ul>
</section>

</section>

</body>
</document>
